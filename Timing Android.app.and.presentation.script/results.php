<!DOCTYPE html>
<html lang="en">
  <head>
    <title>HEPR 2021 Live Results</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="icon" href="images/icon.png">
	
    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i" rel="stylesheet">
	

    <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="css/animate.css">
    
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">

    <link rel="stylesheet" href="css/aos.css">

    <link rel="stylesheet" href="css/ionicons.min.css">

    <link rel="stylesheet" href="css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="css/jquery.timepicker.css">

    
    <link rel="stylesheet" href="css/flaticon.css">
    <link rel="stylesheet" href="css/icomoon.css">
    <link rel="stylesheet" href="css/style.css">
	<script src="js/jquery.min.js"></script>
	
	<style>
	
	@import url("https://fonts.googleapis.com/css?family=Roboto");
* {
  padding: 0;
  margin: 0;
}

.title_button {
	 width: 130px;
    height: 40px;
    font-size: 12px;
    font-family: "Roboto",sans-serif;
    color: #fff;
    letter-spacing: 1px;
    text-transform: uppercase;
    text-align: center;
    background: rgba(253, 218, 31);
    padding: 10px 20px;
    transition: all .5s ease;
    border-radius: 3px;
    cursor: pointer;
	
}
.title_button a {
  text-decoration: none;
  color: #FFF;
}

.table tbody tr td.name_td{
	color:#267aff;
	 text-shadow: -1px 1px 0 #000, -1px -1px 0 #000, 2px 1px 0 #000, -2px 1px 0 #000;
}

.title_button_reg {
      width: 100px;
    height: 40px;
    font-size: 12px;
    font-family: "Roboto",sans-serif;
    color: #fff;
    letter-spacing: 1px;
    text-transform: uppercase;
    text-align: center;
    background: rgba(38, 122, 255);
    padding: 10px 20px;
    transition: all .5s ease;
    border-radius: 3px;
    cursor: pointer;
}
.title_button_reg a {
  text-decoration: none;
  color: #FFF;
}

.title_button_reg1 {
      width: 100px;
    height: 40px;
    font-size: 12px;
    font-family: "Roboto",sans-serif;
    color: #fff;
    letter-spacing: 1px;
    text-transform: uppercase;
    text-align: center;
    background: rgba(38, 122, 255);
    padding: 10px 20px;
    transition: all .5s ease;
    border-radius: 3px;
    cursor: pointer;
}
.title_button_reg1 a {
  text-decoration: none;
  color: #FFF;
}

.is-active {
  box-shadow: 0 20px 5px -10px rgba(0, 0, 0, 0.4);
  transform: translateY(10px);
}

.table-container{
	padding:0 10%;
	margin:40px auto 0;
}

.table{
	width:100%;
	border-collapse:collapse;
}

.table thead{
	background-color: #267AFF;
}

.table thead tr th{
	font-size:14px;
	font-weight:medium;
	Letter-spacing:0.35px;
	color:#FFFFFF;
	opacity:1;
	padding:12px;
	vertical-align: top;
	border:1px solid #dee2e685;
}

.title_button2 {
  width: 120px;
    height: 40px;
    font-size: 12px;
    font-family: "Roboto",sans-serif;
    color: #fff;
    text-transform: uppercase;
    text-align: center;
    letter-spacing: 1px;
    background: rgba(38, 122, 255);
    padding: 10px 20px;
    transition: all .5s ease;
    border-radius: 3px;
    cursor: pointer;
}
.title_button2 a {
  text-decoration: none;
  color: #FFF;
}


.table tbody tr td{
	font-size:14px;
	Letter-spacing:0.35px;
	font-weight:normal;
	color:#f1f1f1;
	background-color:#3c3f44;
	padding:8px;
	text-align:center;
	border:1px solid #dee2e685;
}

#container_button {
  display: flex;                  /* establish flex container */
  flex-direction: row;            /* default value; can be omitted */
  flex-wrap: nowrap;              /* default value; can be omitted */
  justify-content: space-between; /* switched from default (flex-start, see below) */
  
}



.title{
	margin:0 auto;width:100px;
}


@media(max-width:768px){
	
	.title_button2{
	  padding: 0px 20px;
	}
	
	.table thead{
		display:none;
	}
	
	.table, .table tbody ,table tr, table td{
		display:block;
		width:100%;
	}
	
	.table tr{
		margin-bottom:15px;
	}
	
	.table tbody tr td{
		text-align: right;
		padding-Left:50%;
		position: relative;
	}
	
	.table td:before{
		content: attr(data-label);
		position:absolute;
		Left:0;
		width:50%;
		padding-Left: 15px;
		font-weight:600;
		font-size:14px;
		text-align:left;
	}
}
	
	</style>
	
  

  </head>
  <body>
    
	 <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
	    <div class="container">
	      <a class="navbar-brand" href="index.php">Hard Enduro Poiana Rusca 2021</a>
	      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
	        <span class="oi oi-menu"></span> Menu
	      </button>

	      <div class="collapse navbar-collapse" id="ftco-nav">
	        <ul class="navbar-nav ml-auto">
	          <li class="nav-item"><a href="index.php" class="nav-link">Home</a></li>
	          <li class="nav-item"><a href="registration_en.php" class="nav-link">Registration</a></li>
	          <li class="nav-item active"><a href="participants_en.php" class="nav-link">Participants</a></li>
	          <li class="nav-item"><a href="regulation_en.html" class="nav-link">Regulation</a></li>
	          <li class="nav-item"><a href="contact_en.html" class="nav-link">Contact</a></li>
            <li class="nav-item"><a href="participants_ro.php" class="nav-link">Romana</a></li>
	        </ul>
	      </div>
	    </div>
	  </nav>
    <!-- END nav -->
	
	
    
    <section class="hero-wrap hero-wrap-2" style="background-image: url('images/bg_1.jpg');" data-stellar-background-ratio="0.5">
      <div class="overlay"></div>
      <div class="container">
        <div class="row no-gutters slider-text align-items-end justify-content-center">
          <div class="col-md-9 ftco-animate pb-5 text-center">
            <h1 class="mb-3 bread">Live Results 2021 Edition</h1>
			<h1 class="mb-3 bread" style="font-size:30px;">(unofficial results)</h1>

            <p class="breadcrumbs"><span class="mr-2"><a href="index.php">Home <i class="ion-ios-arrow-forward"></i></a></span> <span>Live Results <i class="ion-ios-arrow-forward"></i></span></p>
          </div>
        </div>
      </div>
    </section>

   	
   <section class="ftco-section-parallax bg-secondary">
      <div class="parallax-img d-flex align-items-center">
        <div class="container">
          <div class="row d-flex justify-content-center">
            <div class="col-md-7 text-center heading-section heading-section-white ftco-animate">
			
			<div id="container_button">
			
			   <div class="title_button" id="title_button">
                  <a href="#" >Prolog</a>
                     </div>
			
			   <div class="title_button_reg" id="title_button_reg">
                 <a href="results_day1.php" >Day1</a>
                   </div>

	           <div class="title_button_reg1" id="title_button_reg1">
                 <a href="results_day2.php" >Day2</a>
                 </div>
				 
				 <div class="title_button2">
    <a href="results_overall.php" >Over all</a>
    </div>
			</div>
			
             <br><br><br>
		<center><div>
<a class="button" data-table="1" id="table1">Pro </a> &nbsp; 
<a class="button" data-table="2" id="table2">Expert </a> &nbsp; 
<a class="button" data-table="3" id="table3">Hobby </a> &nbsp; 
<a class="button" data-table="4" id="table4">Girl </a> &nbsp; 
<a class="button" data-table="5" id="table5">Veteran</a>
        </div></center>
		<br><br><br>
		
		
		<center><table class="table table-hover" id="1">
	<thead>
	<tr>
	<th>Diff</th>
	<th>Place</th>
	<th>#</th>
	<th>Name</th>
	<th>Clasa</th>
	<th>Start</th>
	<th>Finish</th>
	<th>Time</th>
	</tr>
    </thead>
	
	
      <tbody> 
	  
 <?php
$servername = "localhost";
$username = "endurop1_part";
$password = "parola001";
$dbname = "endurop1_participanti";

$conn = mysqli_connect($servername, $username, $password, $dbname);
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}
$cat ="A";



$sql = "SELECT name,number, CAT, f.DNF AS DNF, s.TIMESTAMP AS timest, f.TIMESTAMP AS timefn ,f.DNFtime AS DNFtime
                  FROM riders r, day1_cpstart s,day1_cpfinish f  
				  WHERE (r.TAG_ID LIKE s.TAG_EVENT AND r.TAG_ID LIKE f.TAG_EVENT) AND (r.CAT LIKE '$cat') 
				  ORDER BY (f.TIMESTAMP-s.TIMESTAMP) ASC";
$result = $conn->query($sql);
$counter=1;
$last_tm=0;



if ($result->num_rows > 0) {
    while($row = $result->fetch_assoc()) {
		
		$finish_time = $row["timefn"];
	

		$date1 = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));   // calculate finish time
        $date2 = date('Y-m-d h:i:s',substr($finish_time, 0, -3));
        $datetimeObj1 = new DateTime($date1);
        $datetimeObj2 = new DateTime($date2);
        $interval = $datetimeObj1->diff($datetimeObj2);
		$sec=$interval->format('%s');
		$min=$interval->format('%i');
		$h=$interval->format('%h');
		
		
		if($counter == 1){
			$date1st = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));
            $date2st = date('Y-m-d h:i:s',substr($row["timefn"], 0, -3));
            $datetimeObj1st = new DateTime($date1st);
            $datetimeObj2st = new DateTime($date2st);
            $intervalst = $datetimeObj1st->diff($datetimeObj2st);
		}
		
		
		$e = new DateTime('00:00:00');
		$f = new DateTime('00:00:00');
		
		
		$date11 = date('Y-m-d h:i:s',substr($row["timefn"], 0, -3));   // calculate finish time
        $date22 = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));
        $datetimeObj11 = new DateTime($date11);
        $datetimeObj22 = new DateTime($date22);
        $interval1 = $datetimeObj11->diff($datetimeObj22);
		$days_until_finish = $interval1->format('%d');   //if difference of time from start to finish > 6(added on start) then finish not set
	
	    $e->add($intervalst);
		$f->add($interval);
		
		$sec_fn = $e->diff($f)->format('%s');
		$min_fn = $e->diff($f)->format('%i');
		$h_fn = $e->diff($f)->format('%h');
		
		if($sec_fn<=9){
			$sec_fn1 = "0$sec_fn";
		}
		else{
			$sec_fn1 = $sec_fn;
		}
		
		if($min_fn<=9){
			$min_fn1 = "0$min_fn";
		}
		else{
			$min_fn1 = $min_fn;
		}
		
		if($h_fn<=9){
			$h_fn1 = "0$h_fn";
		}
		else{
			$h_fn1 = $h_fn;
		}
		
		if($counter == 1){
			$diff = "0";
		}else{
		$diff = "+$h_fn1:$min_fn1:$sec_fn1";
		}
	
	
		
		if($days_until_finish > 2){          //verify if finish time is set
			
		if($row["DNF"] == 1){   //rider not finished prolog
		
		$sec=$interval->format('%s');
		$min=$interval->format('%i');
		$h=$interval->format('%h');
		
		$time_interval = "$h_f:$min_f:$sec_f";
		
		$diff = $last_diff;
		  
		}else{
			
			$time_interval = "DNF";
			$time_finish = "DNF";
			$diff ="0";
		}
			
			
		}else{
			
			if($sec<=9){
			$sec_f = "0$sec";
		}
		else{
			$sec_f = $sec;
		}
		
		if($min<=9){
			$min_f = "0$min";
		}
		else{
			$min_f = $min;
		}
		
		if($h<=9){
			$h_f = "0$h";
		}
		else{
			$h_f = $h;
		}
		
		
		
		
		$last_diff = $diff;
	
		$date1lst = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));   // calculate finish time
        $date2lst = date('Y-m-d h:i:s',substr($row["timefn"], 0, -3));
        $datetimeObj1lst = new DateTime($date1lst);
        $datetimeObj2lst = new DateTime($date2lst);
        $intervallst = $datetimeObj1lst->diff($datetimeObj2lst);
		
		
		
			$time_finish = date('H:i:s',substr($row["timefn"], 0, -3));
			$time_interval = "$h_f:$min_f:$sec_f";
			
		}
		
		
		if($row["DNF"] == 1){
			
		
			
		$finish_time = $row["DNFtime"];
	

		$date1 = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));   // calculate finish time
        $date2 = date('Y-m-d h:i:s',substr($finish_time, 0, -3));
        $datetimeObj1 = new DateTime($date1);
        $datetimeObj2 = new DateTime($date2);
        $interval = $datetimeObj1->diff($datetimeObj2);
		$sec=$interval->format('%s');
		$min=$interval->format('%i');
		$h=$interval->format('%h');
		
		if($sec<=9){
			$sec_f = "0$sec";
		}
		else{
			$sec_f = $sec;
		}
		
		if($min<=9){
			$min_f = "0$min";
		}
		else{
			$min_f = $min;
		}
		
		if($h<=9){
			$h_f = "0$h";
		}
		else{
			$h_f = $h;
		}
			
			$time_interval = "$h_f:$min_f:$sec_f";
			$time_finish="DNF";
		}
		
		
		
		
		
  echo "<tr>
        <td data-label=\"Diff\">".$diff."</td>
        <td data-label=\"Place\">".$counter."</td>
        <td class=\"name_td\" data-label=\"#\">".$row["number"]."</td>
		<td class=\"name_td\" data-label=\"Name\">".$row["name"]."</td>
		<td data-label=\"Clasa\">Pro</td>
		<td data-label=\"Start\">".date('H:i:s',substr($row["timest"], 0, -3))."</td>
		<td data-label=\"Finish\">".$time_finish."</td>
		<td data-label=\"Time\">".$time_interval."</td>
		</tr>";
		
        $counter++;
    }
}

?>
	  </tbody>
	</table></center>
	
	<center><table class="table table-hover" id="2">
	<thead>
	<tr>
	<th>Diff</th>
	<th>Place</th>
	<th>#</th>
	<th>Name</th>
	<th>Clasa</th>
	<th>Start</th>
	<th>Finish</th>
	<th>Time</th>
	</tr>
    </thead>
	
      <tbody>
	   <?php
$servername = "localhost";
$username = "endurop1_part";
$password = "parola001";
$dbname = "endurop1_participanti";

$conn = mysqli_connect($servername, $username, $password, $dbname);
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}
$cat ="B";



$sql = "SELECT name,number, CAT, f.DNF AS DNF, s.TIMESTAMP AS timest, f.TIMESTAMP AS timefn ,f.DNFtime AS DNFtime
                  FROM riders r, day1_cpstart s,day1_cpfinish f  
				  WHERE (r.TAG_ID LIKE s.TAG_EVENT AND r.TAG_ID LIKE f.TAG_EVENT) AND (r.CAT LIKE '$cat') 
				  ORDER BY (f.TIMESTAMP-s.TIMESTAMP) ASC";
$result = $conn->query($sql);
$counter=1;
$last_tm=0;



if ($result->num_rows > 0) {
    while($row = $result->fetch_assoc()) {
		
		$finish_time = $row["timefn"];
	

		$date1 = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));   // calculate finish time
        $date2 = date('Y-m-d h:i:s',substr($finish_time, 0, -3));
        $datetimeObj1 = new DateTime($date1);
        $datetimeObj2 = new DateTime($date2);
        $interval = $datetimeObj1->diff($datetimeObj2);
		$sec=$interval->format('%s');
		$min=$interval->format('%i');
		$h=$interval->format('%h');
		
		
		if($counter == 1){
			$date1st = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));
            $date2st = date('Y-m-d h:i:s',substr($row["timefn"], 0, -3));
            $datetimeObj1st = new DateTime($date1st);
            $datetimeObj2st = new DateTime($date2st);
            $intervalst = $datetimeObj1st->diff($datetimeObj2st);
		}
		
		
		$e = new DateTime('00:00:00');
		$f = new DateTime('00:00:00');
		
		
		$date11 = date('Y-m-d h:i:s',substr($row["timefn"], 0, -3));   // calculate finish time
        $date22 = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));
        $datetimeObj11 = new DateTime($date11);
        $datetimeObj22 = new DateTime($date22);
        $interval1 = $datetimeObj11->diff($datetimeObj22);
		$days_until_finish = $interval1->format('%d');   //if difference of time from start to finish > 6(added on start) then finish not set
	
	    $e->add($intervalst);
		$f->add($interval);
		
		$sec_fn = $e->diff($f)->format('%s');
		$min_fn = $e->diff($f)->format('%i');
		$h_fn = $e->diff($f)->format('%h');
		
		if($sec_fn<=9){
			$sec_fn1 = "0$sec_fn";
		}
		else{
			$sec_fn1 = $sec_fn;
		}
		
		if($min_fn<=9){
			$min_fn1 = "0$min_fn";
		}
		else{
			$min_fn1 = $min_fn;
		}
		
		if($h_fn<=9){
			$h_fn1 = "0$h_fn";
		}
		else{
			$h_fn1 = $h_fn;
		}
		
		if($counter == 1){
			$diff = "0";
		}else{
		$diff = "+$h_fn1:$min_fn1:$sec_fn1";
		}
	
	
		
		if($days_until_finish > 2){          //verify if finish time is set
			
		if($row["DNF"] == 1){   //rider not finished prolog
		
		$sec=$interval->format('%s');
		$min=$interval->format('%i');
		$h=$interval->format('%h');
		
		$time_interval = "$h_f:$min_f:$sec_f";
		
		$diff = $last_diff;
		  
		}else{
			
			$time_interval = "DNF";
			$time_finish = "DNF";
			$diff ="0";
		}
			
			
		}else{
			
			if($sec<=9){
			$sec_f = "0$sec";
		}
		else{
			$sec_f = $sec;
		}
		
		if($min<=9){
			$min_f = "0$min";
		}
		else{
			$min_f = $min;
		}
		
		if($h<=9){
			$h_f = "0$h";
		}
		else{
			$h_f = $h;
		}
		
		
		
		
		$last_diff = $diff;
	
		$date1lst = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));   // calculate finish time
        $date2lst = date('Y-m-d h:i:s',substr($row["timefn"], 0, -3));
        $datetimeObj1lst = new DateTime($date1lst);
        $datetimeObj2lst = new DateTime($date2lst);
        $intervallst = $datetimeObj1lst->diff($datetimeObj2lst);
		
		
		
			$time_finish = date('H:i:s',substr($row["timefn"], 0, -3));
			$time_interval = "$h_f:$min_f:$sec_f";
			
		}
		
		
		if($row["DNF"] == 1){
			
		
			
		$finish_time = $row["DNFtime"];
	

		$date1 = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));   // calculate finish time
        $date2 = date('Y-m-d h:i:s',substr($finish_time, 0, -3));
        $datetimeObj1 = new DateTime($date1);
        $datetimeObj2 = new DateTime($date2);
        $interval = $datetimeObj1->diff($datetimeObj2);
		$sec=$interval->format('%s');
		$min=$interval->format('%i');
		$h=$interval->format('%h');
		
		if($sec<=9){
			$sec_f = "0$sec";
		}
		else{
			$sec_f = $sec;
		}
		
		if($min<=9){
			$min_f = "0$min";
		}
		else{
			$min_f = $min;
		}
		
		if($h<=9){
			$h_f = "0$h";
		}
		else{
			$h_f = $h;
		}
			
			$time_interval = "$h_f:$min_f:$sec_f";
			$time_finish="DNF";
		}
		
		
		
		
		
  echo "<tr>
        <td data-label=\"Diff\">".$diff."</td>
        <td data-label=\"Place\">".$counter."</td>
        <td class=\"name_td\" data-label=\"#\">".$row["number"]."</td>
		<td class=\"name_td\" data-label=\"Name\">".$row["name"]."</td>
		<td data-label=\"Clasa\">Expert</td>
		<td data-label=\"Start\">".date('H:i:s',substr($row["timest"], 0, -3))."</td>
		<td data-label=\"Finish\">".$time_finish."</td>
		<td data-label=\"Time\">".$time_interval."</td>
		</tr>";
		
        $counter++;
    }
}

?>
	  </tbody>
	</table></center>
           
		   <center><table class="table table-hover" id="3">
	<thead>
	<tr>
	<th>Diff</th>
	<th>Place</th>
	<th>#</th>
	<th>Name</th>
	<th>Clasa</th>
	<th>Start</th>
	<th>Finish</th>
	<th>Time</th>
	</tr>
    </thead>
	
      <tbody>
	<?php
$servername = "localhost";
$username = "endurop1_part";
$password = "parola001";
$dbname = "endurop1_participanti";

$conn = mysqli_connect($servername, $username, $password, $dbname);
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}
$cat ="C";



$sql = "SELECT name,number, CAT, f.DNF AS DNF, s.TIMESTAMP AS timest, f.TIMESTAMP AS timefn ,f.DNFtime AS DNFtime
                  FROM riders r, day1_cpstart s,day1_cpfinish f  
				  WHERE (r.TAG_ID LIKE s.TAG_EVENT AND r.TAG_ID LIKE f.TAG_EVENT) AND (r.CAT LIKE '$cat') 
				  ORDER BY (f.TIMESTAMP-s.TIMESTAMP) ASC";
$result = $conn->query($sql);
$counter=1;
$last_tm=0;



if ($result->num_rows > 0) {
    while($row = $result->fetch_assoc()) {
		
		$finish_time = $row["timefn"];
	

		$date1 = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));   // calculate finish time
        $date2 = date('Y-m-d h:i:s',substr($finish_time, 0, -3));
        $datetimeObj1 = new DateTime($date1);
        $datetimeObj2 = new DateTime($date2);
        $interval = $datetimeObj1->diff($datetimeObj2);
		$sec=$interval->format('%s');
		$min=$interval->format('%i');
		$h=$interval->format('%h');
		
		
		if($counter == 1){
			$date1st = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));
            $date2st = date('Y-m-d h:i:s',substr($row["timefn"], 0, -3));
            $datetimeObj1st = new DateTime($date1st);
            $datetimeObj2st = new DateTime($date2st);
            $intervalst = $datetimeObj1st->diff($datetimeObj2st);
		}
		
		
		$e = new DateTime('00:00:00');
		$f = new DateTime('00:00:00');
		
		
		$date11 = date('Y-m-d h:i:s',substr($row["timefn"], 0, -3));   // calculate finish time
        $date22 = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));
        $datetimeObj11 = new DateTime($date11);
        $datetimeObj22 = new DateTime($date22);
        $interval1 = $datetimeObj11->diff($datetimeObj22);
		$days_until_finish = $interval1->format('%d');   //if difference of time from start to finish > 6(added on start) then finish not set
	
	    $e->add($intervalst);
		$f->add($interval);
		
		$sec_fn = $e->diff($f)->format('%s');
		$min_fn = $e->diff($f)->format('%i');
		$h_fn = $e->diff($f)->format('%h');
		
		if($sec_fn<=9){
			$sec_fn1 = "0$sec_fn";
		}
		else{
			$sec_fn1 = $sec_fn;
		}
		
		if($min_fn<=9){
			$min_fn1 = "0$min_fn";
		}
		else{
			$min_fn1 = $min_fn;
		}
		
		if($h_fn<=9){
			$h_fn1 = "0$h_fn";
		}
		else{
			$h_fn1 = $h_fn;
		}
		
		if($counter == 1){
			$diff = "0";
		}else{
		$diff = "+$h_fn1:$min_fn1:$sec_fn1";
		}
	
	
		
		if($days_until_finish > 2){          //verify if finish time is set
			
		if($row["DNF"] == 1){   //rider not finished prolog
		
		$sec=$interval->format('%s');
		$min=$interval->format('%i');
		$h=$interval->format('%h');
		
		$time_interval = "$h_f:$min_f:$sec_f";
		
		$diff = $last_diff;
		  
		}else{
			
			$time_interval = "DNF";
			$time_finish = "DNF";
			$diff ="0";
		}
			
			
		}else{
			
			if($sec<=9){
			$sec_f = "0$sec";
		}
		else{
			$sec_f = $sec;
		}
		
		if($min<=9){
			$min_f = "0$min";
		}
		else{
			$min_f = $min;
		}
		
		if($h<=9){
			$h_f = "0$h";
		}
		else{
			$h_f = $h;
		}
		
		
		
		
		$last_diff = $diff;
	
		$date1lst = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));   // calculate finish time
        $date2lst = date('Y-m-d h:i:s',substr($row["timefn"], 0, -3));
        $datetimeObj1lst = new DateTime($date1lst);
        $datetimeObj2lst = new DateTime($date2lst);
        $intervallst = $datetimeObj1lst->diff($datetimeObj2lst);
		
		
		
			$time_finish = date('H:i:s',substr($row["timefn"], 0, -3));
			$time_interval = "$h_f:$min_f:$sec_f";
			
		}
		
		
		if($row["DNF"] == 1){
			
		
			
		$finish_time = $row["DNFtime"];
	

		$date1 = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));   // calculate finish time
        $date2 = date('Y-m-d h:i:s',substr($finish_time, 0, -3));
        $datetimeObj1 = new DateTime($date1);
        $datetimeObj2 = new DateTime($date2);
        $interval = $datetimeObj1->diff($datetimeObj2);
		$sec=$interval->format('%s');
		$min=$interval->format('%i');
		$h=$interval->format('%h');
		
		if($sec<=9){
			$sec_f = "0$sec";
		}
		else{
			$sec_f = $sec;
		}
		
		if($min<=9){
			$min_f = "0$min";
		}
		else{
			$min_f = $min;
		}
		
		if($h<=9){
			$h_f = "0$h";
		}
		else{
			$h_f = $h;
		}
			
			$time_interval = "$h_f:$min_f:$sec_f";
			$time_finish="DNF";
		}
		
		
		
		
		
  echo "<tr>
        <td data-label=\"Diff\">".$diff."</td>
        <td data-label=\"Place\">".$counter."</td>
        <td class=\"name_td\" data-label=\"#\">".$row["number"]."</td>
		<td class=\"name_td\" data-label=\"Name\">".$row["name"]."</td>
		<td data-label=\"Clasa\">Hobby</td>
		<td data-label=\"Start\">".date('H:i:s',substr($row["timest"], 0, -3))."</td>
		<td data-label=\"Finish\">".$time_finish."</td>
		<td data-label=\"Time\">".$time_interval."</td>
		</tr>";
		
        $counter++;
    }
}

?>
	  </tbody>
	</table></center>
              
			  
			  <center><table class="table table-hover" id="4">
	<thead>
	<tr>
	<th>Diff</th>
	<th>Place</th>
	<th>#</th>
	<th>Name</th>
	<th>Clasa</th>
	<th>Start</th>
	<th>Finish</th>
	<th>Time</th>
	</tr>
    </thead>
	
      <tbody>
	 <?php
$servername = "localhost";
$username = "endurop1_part";
$password = "parola001";
$dbname = "endurop1_participanti";

$conn = mysqli_connect($servername, $username, $password, $dbname);
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}
$cat ="Fete";



$sql = "SELECT name,number, CAT, f.DNF AS DNF, s.TIMESTAMP AS timest, f.TIMESTAMP AS timefn ,f.DNFtime AS DNFtime
                  FROM riders r, day1_cpstart s,day1_cpfinish f  
				  WHERE (r.TAG_ID LIKE s.TAG_EVENT AND r.TAG_ID LIKE f.TAG_EVENT) AND (r.CAT LIKE '$cat') 
				  ORDER BY (f.TIMESTAMP-s.TIMESTAMP) ASC";
$result = $conn->query($sql);
$counter=1;
$last_tm=0;



if ($result->num_rows > 0) {
    while($row = $result->fetch_assoc()) {
		
		$finish_time = $row["timefn"];
	

		$date1 = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));   // calculate finish time
        $date2 = date('Y-m-d h:i:s',substr($finish_time, 0, -3));
        $datetimeObj1 = new DateTime($date1);
        $datetimeObj2 = new DateTime($date2);
        $interval = $datetimeObj1->diff($datetimeObj2);
		$sec=$interval->format('%s');
		$min=$interval->format('%i');
		$h=$interval->format('%h');
		
		
		if($counter == 1){
			$date1st = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));
            $date2st = date('Y-m-d h:i:s',substr($row["timefn"], 0, -3));
            $datetimeObj1st = new DateTime($date1st);
            $datetimeObj2st = new DateTime($date2st);
            $intervalst = $datetimeObj1st->diff($datetimeObj2st);
		}
		
		
		$e = new DateTime('00:00:00');
		$f = new DateTime('00:00:00');
		
		
		$date11 = date('Y-m-d h:i:s',substr($row["timefn"], 0, -3));   // calculate finish time
        $date22 = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));
        $datetimeObj11 = new DateTime($date11);
        $datetimeObj22 = new DateTime($date22);
        $interval1 = $datetimeObj11->diff($datetimeObj22);
		$days_until_finish = $interval1->format('%d');   //if difference of time from start to finish > 6(added on start) then finish not set
	
	    $e->add($intervalst);
		$f->add($interval);
		
		$sec_fn = $e->diff($f)->format('%s');
		$min_fn = $e->diff($f)->format('%i');
		$h_fn = $e->diff($f)->format('%h');
		
		if($sec_fn<=9){
			$sec_fn1 = "0$sec_fn";
		}
		else{
			$sec_fn1 = $sec_fn;
		}
		
		if($min_fn<=9){
			$min_fn1 = "0$min_fn";
		}
		else{
			$min_fn1 = $min_fn;
		}
		
		if($h_fn<=9){
			$h_fn1 = "0$h_fn";
		}
		else{
			$h_fn1 = $h_fn;
		}
		
		if($counter == 1){
			$diff = "0";
		}else{
		$diff = "+$h_fn1:$min_fn1:$sec_fn1";
		}
	
	
		
		if($days_until_finish > 2){          //verify if finish time is set
			
		if($row["DNF"] == 1){   //rider not finished prolog
		
		$sec=$interval->format('%s');
		$min=$interval->format('%i');
		$h=$interval->format('%h');
		
		$time_interval = "$h_f:$min_f:$sec_f";
		
		$diff = $last_diff;
		  
		}else{
			
			$time_interval = "DNF";
			$time_finish = "DNF";
			$diff ="0";
		}
			
			
		}else{
			
			if($sec<=9){
			$sec_f = "0$sec";
		}
		else{
			$sec_f = $sec;
		}
		
		if($min<=9){
			$min_f = "0$min";
		}
		else{
			$min_f = $min;
		}
		
		if($h<=9){
			$h_f = "0$h";
		}
		else{
			$h_f = $h;
		}
		
		
		
		
		$last_diff = $diff;
	
		$date1lst = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));   // calculate finish time
        $date2lst = date('Y-m-d h:i:s',substr($row["timefn"], 0, -3));
        $datetimeObj1lst = new DateTime($date1lst);
        $datetimeObj2lst = new DateTime($date2lst);
        $intervallst = $datetimeObj1lst->diff($datetimeObj2lst);
		
		
		
			$time_finish = date('H:i:s',substr($row["timefn"], 0, -3));
			$time_interval = "$h_f:$min_f:$sec_f";
			
		}
		
		
		if($row["DNF"] == 1){
			
		
			
		$finish_time = $row["DNFtime"];
	

		$date1 = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));   // calculate finish time
        $date2 = date('Y-m-d h:i:s',substr($finish_time, 0, -3));
        $datetimeObj1 = new DateTime($date1);
        $datetimeObj2 = new DateTime($date2);
        $interval = $datetimeObj1->diff($datetimeObj2);
		$sec=$interval->format('%s');
		$min=$interval->format('%i');
		$h=$interval->format('%h');
		
		if($sec<=9){
			$sec_f = "0$sec";
		}
		else{
			$sec_f = $sec;
		}
		
		if($min<=9){
			$min_f = "0$min";
		}
		else{
			$min_f = $min;
		}
		
		if($h<=9){
			$h_f = "0$h";
		}
		else{
			$h_f = $h;
		}
			
			$time_interval = "$h_f:$min_f:$sec_f";
			$time_finish="DNF";
		}
		
		
		
		
		
  echo "<tr>
        <td data-label=\"Diff\">".$diff."</td>
        <td data-label=\"Place\">".$counter."</td>
        <td class=\"name_td\" data-label=\"#\">".$row["number"]."</td>
		<td class=\"name_td\" data-label=\"Name\">".$row["name"]."</td>
		<td data-label=\"Clasa\">Girl</td>
		<td data-label=\"Start\">".date('H:i:s',substr($row["timest"], 0, -3))."</td>
		<td data-label=\"Finish\">".$time_finish."</td>
		<td data-label=\"Time\">".$time_interval."</td>
		</tr>";
		
        $counter++;
    }
}

?>
	  </tbody>
	</table></center>
	
	<center><table class="table table-hover" id="5">
	<thead>
	<tr>
	<th>Diff</th>
	<th>Place</th>
	<th>#</th>
	<th>Name</th>
	<th>Clasa</th>
	<th>Start</th>
	<th>Finish</th>
	<th>Time</th>
	</tr>
    </thead>
	
      <tbody>
	<?php
$servername = "localhost";
$username = "endurop1_part";
$password = "parola001";
$dbname = "endurop1_participanti";

$conn = mysqli_connect($servername, $username, $password, $dbname);
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}
$cat ="Veterani";



$sql = "SELECT name,number, CAT, f.DNF AS DNF, s.TIMESTAMP AS timest, f.TIMESTAMP AS timefn ,f.DNFtime AS DNFtime
                  FROM riders r, day1_cpstart s,day1_cpfinish f  
				  WHERE (r.TAG_ID LIKE s.TAG_EVENT AND r.TAG_ID LIKE f.TAG_EVENT) AND (r.CAT LIKE '$cat') 
				  ORDER BY (f.TIMESTAMP-s.TIMESTAMP) ASC";
$result = $conn->query($sql);
$counter=1;
$last_tm=0;



if ($result->num_rows > 0) {
    while($row = $result->fetch_assoc()) {
		
		$finish_time = $row["timefn"];
	

		$date1 = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));   // calculate finish time
        $date2 = date('Y-m-d h:i:s',substr($finish_time, 0, -3));
        $datetimeObj1 = new DateTime($date1);
        $datetimeObj2 = new DateTime($date2);
        $interval = $datetimeObj1->diff($datetimeObj2);
		$sec=$interval->format('%s');
		$min=$interval->format('%i');
		$h=$interval->format('%h');
		
		
		if($counter == 1){
			$date1st = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));
            $date2st = date('Y-m-d h:i:s',substr($row["timefn"], 0, -3));
            $datetimeObj1st = new DateTime($date1st);
            $datetimeObj2st = new DateTime($date2st);
            $intervalst = $datetimeObj1st->diff($datetimeObj2st);
		}
		
		
		$e = new DateTime('00:00:00');
		$f = new DateTime('00:00:00');
		
		
		$date11 = date('Y-m-d h:i:s',substr($row["timefn"], 0, -3));   // calculate finish time
        $date22 = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));
        $datetimeObj11 = new DateTime($date11);
        $datetimeObj22 = new DateTime($date22);
        $interval1 = $datetimeObj11->diff($datetimeObj22);
		$days_until_finish = $interval1->format('%d');   //if difference of time from start to finish > 6(added on start) then finish not set
	
	    $e->add($intervalst);
		$f->add($interval);
		
		$sec_fn = $e->diff($f)->format('%s');
		$min_fn = $e->diff($f)->format('%i');
		$h_fn = $e->diff($f)->format('%h');
		
		if($sec_fn<=9){
			$sec_fn1 = "0$sec_fn";
		}
		else{
			$sec_fn1 = $sec_fn;
		}
		
		if($min_fn<=9){
			$min_fn1 = "0$min_fn";
		}
		else{
			$min_fn1 = $min_fn;
		}
		
		if($h_fn<=9){
			$h_fn1 = "0$h_fn";
		}
		else{
			$h_fn1 = $h_fn;
		}
		
		if($counter == 1){
			$diff = "0";
		}else{
		$diff = "+$h_fn1:$min_fn1:$sec_fn1";
		}
	
	
		
		if($days_until_finish > 2){          //verify if finish time is set
			
		if($row["DNF"] == 1){   //rider not finished prolog
		
		$sec=$interval->format('%s');
		$min=$interval->format('%i');
		$h=$interval->format('%h');
		
		$time_interval = "$h_f:$min_f:$sec_f";
		
		$diff = $last_diff;
		  
		}else{
			
			$time_interval = "DNF";
			$time_finish = "DNF";
			$diff ="0";
		}
			
			
		}else{
			
			if($sec<=9){
			$sec_f = "0$sec";
		}
		else{
			$sec_f = $sec;
		}
		
		if($min<=9){
			$min_f = "0$min";
		}
		else{
			$min_f = $min;
		}
		
		if($h<=9){
			$h_f = "0$h";
		}
		else{
			$h_f = $h;
		}
		
		
		
		
		$last_diff = $diff;
	
		$date1lst = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));   // calculate finish time
        $date2lst = date('Y-m-d h:i:s',substr($row["timefn"], 0, -3));
        $datetimeObj1lst = new DateTime($date1lst);
        $datetimeObj2lst = new DateTime($date2lst);
        $intervallst = $datetimeObj1lst->diff($datetimeObj2lst);
		
		
		
			$time_finish = date('H:i:s',substr($row["timefn"], 0, -3));
			$time_interval = "$h_f:$min_f:$sec_f";
			
		}
		
		
		if($row["DNF"] == 1){
			
		
			
		$finish_time = $row["DNFtime"];
	

		$date1 = date('Y-m-d h:i:s',substr($row["timest"], 0, -3));   // calculate finish time
        $date2 = date('Y-m-d h:i:s',substr($finish_time, 0, -3));
        $datetimeObj1 = new DateTime($date1);
        $datetimeObj2 = new DateTime($date2);
        $interval = $datetimeObj1->diff($datetimeObj2);
		$sec=$interval->format('%s');
		$min=$interval->format('%i');
		$h=$interval->format('%h');
		
		if($sec<=9){
			$sec_f = "0$sec";
		}
		else{
			$sec_f = $sec;
		}
		
		if($min<=9){
			$min_f = "0$min";
		}
		else{
			$min_f = $min;
		}
		
		if($h<=9){
			$h_f = "0$h";
		}
		else{
			$h_f = $h;
		}
			
			$time_interval = "$h_f:$min_f:$sec_f";
			$time_finish="DNF";
		}
		
		
		
		
		
  echo "<tr>
        <td data-label=\"Diff\">".$diff."</td>
        <td data-label=\"Place\">".$counter."</td>
        <td class=\"name_td\" data-label=\"#\">".$row["number"]."</td>
		<td class=\"name_td\" data-label=\"Name\">".$row["name"]."</td>
		<td data-label=\"Clasa\">Veteran</td>
		<td data-label=\"Start\">".date('H:i:s',substr($row["timest"], 0, -3))."</td>
		<td data-label=\"Finish\">".$time_finish."</td>
		<td data-label=\"Time\">".$time_interval."</td>
		</tr>";
		
        $counter++;
    }
}

?>
	  </tbody>
	</table></center>
           
		   
            </div>
          </div>
        </div>
      </div>
    </section>
		
		
            
              
           
		   
            </div>
          </div>
        </div>
      </div>
    </section>





   

    <footer class="ftco-footer ftco-bg-dark ftco-section">
      <div class="container">
        <div class="row mb-5">
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
             
			  <img src="images/fo.png" >
              <ul class="ftco-footer-social list-unstyled float-md-left float-lft mt-5">
                <li class="ftco-animate"><a href="https://www.facebook.com/enduroHD/"><span class="icon-facebook"></span></a></li>
                <li class="ftco-animate"><a href="https://www.instagram.com/hard_enduro_poiana_rusca/?hl=ro"><span class="icon-instagram"></span></a></li>
              </ul>
            </div>
          </div>
          <div class="col-md">
            <div class="ftco-footer-widget mb-4 ml-md-5">
              <h2 class="ftco-heading-2">Looking for something else?</h2>
              <ul class="list-unstyled">
			    <li><a href="index_ro.html" class="py-1 d-block"><span class="ion-ios-arrow-forward mr-3"></span>This website is also available in <h9>Romana</h9></a></li>
                <li><a href="registration_en.php" class="py-1 d-block"><span class="ion-ios-arrow-forward mr-3"></span>Registration</a></li>
                <li><a href="participants_en.php" class="py-1 d-block"><span class="ion-ios-arrow-forward mr-3"></span>Participants</a></li>
                <li><a href="regulation_en.html" class="py-1 d-block"><span class="ion-ios-arrow-forward mr-3"></span>Regulation</a></li>
                <li><a href="contact_en.html" class="py-1 d-block"><span class="ion-ios-arrow-forward mr-3"></span>Contact</a></li>
				 <li><a href="penalty_log.php" class="py-1 d-block"><span class="ion-ios-arrow-forward mr-3"></span>Log In</a></li>
                
              </ul>
            </div>
          </div>
          <div class="col-md">
             <div class="ftco-footer-widget mb-4">
              <h2 class="ftco-heading-2">Race Schedule</h2>
              <div class="opening-hours">
              	<h4>Opening Days:</h4>
              	<p class="pl-3">
              		<span>Friday 20 August - Prologue<br></span>
              		<span>Saturday 21 August - First Day on Track<br></span>
					<span>Sunday 22 August - Second Day on Track</span>
              	</p>
              </div>
            </div>
          </div>
          <div class="col-md">
            <div class="ftco-footer-widget mb-4">
            	<h2 class="ftco-heading-2">Have a Question?</h2>
            	<div class="block-23 mb-3">
	              <ul>
	                <li><span class="icon icon-map-marker"></span><span class="text"> Poiana Rachitelii,Cerbal County,337184 ,Hunedoara </span></li>
	                <li><a href="tel://+40742615550"><span class="icon icon-phone"></span><span class="text">+40 742615550</span></a></li>
	                <li><a href="mailto:hepr2021@enduropoianarusca.ro.ro"><span class="icon icon-envelope"></span><span class="text">hepr2021@enduropoianarusca.ro</span></a></li>
	              </ul>
	            </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-md-12 text-center">
            <p>&copy;<script>document.write(new Date().getFullYear());</script> - HEPR - All rights reserved </a></p>
          </div>
        </div>
      </div>
    </footer>
    
  

  <!-- loader -->
  <div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>

  
      <script>

$(".title_button_reg").hover(function(){
  $(this).toggleClass("is-active");
});

$(".title_button_reg1").hover(function(){
  $(this).toggleClass("is-active");
});

$(".title_button2").hover(function(){
  $(this).toggleClass("is-active");
});
 </script>

  
  
  <script src="js/jquery-migrate-3.0.1.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery.easing.1.3.js"></script>
  <script src="js/jquery.waypoints.min.js"></script>
  <script src="js/jquery.stellar.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/jquery.magnific-popup.min.js"></script>
  <script src="js/aos.js"></script>
  <script src="js/jquery.animateNumber.min.js"></script>
  <script src="js/bootstrap-datepicker.js"></script>
  <script src="js/jquery.timepicker.min.js"></script>
  <script src="js/scrollax.min.js"></script>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
  <script src="js/google-map.js"></script>
  <script src="js/main.js"></script>
    <script src="js/table_hide.js"></script>
  </body>
</html>